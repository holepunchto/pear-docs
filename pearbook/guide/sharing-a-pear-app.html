<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Pear Docs</title>
<meta content="width=device-width, initial-scale=1" name="viewport">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon-96x96.png">
<link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
<link rel="shortcut icon" href="/assets/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
<link rel="manifest" href="/assets/site.webmanifest">
<link href="/assets/index.css" rel="stylesheet">
</head>
<body>
<header class="site-header"><label class="site-header__button" id="table-of-contents-toggle-button" for="table-of-contents-toggle" type="button" aria-label="Open table of contents" aria-pressed="false" data-active="false" data-state="closed"><svg class="site-header__button-icon" style="mask-image:url(/assets/bars.svg);-webkit-mask-image:url(/assets/bars.svg);mask-repeat:no-repeat;-webkit-mask-repeat:no-repeat;mask-position:center;-webkit-mask-position:center;background-color:currentColor"></svg></label><a href="/"><img alt="logo" src="/assets/pear-vector.svg"></a><div class="site-header__right"><div class="color-scheme-toggle"><button class="color-scheme-toggle__button"><div class="color-scheme-toggle__circle"></div></button></div></div></header><div class="site-container"><input id="table-of-contents-toggle" name="table-of-contents-toggle" type="checkbox"><aside class="table-of-contents" id="table-of-contents"><ul>
<li><a href="/index.html">Pear by Holepunch</a></li>
</ul>
<h3>Reference</h3>
<ul>
<li><a href="/reference/cli.html">Pear CLI</a></li>
<li><a href="/reference/configuration.html">Pear Application Configuration</a></li>
<li><a href="/reference/bare-overview.html">Bare Overview</a></li>
<li><a href="/reference/api.html">API</a></li>
<li><a href="/reference/templates.html">Templates</a></li>
<li><a href="/reference/node-compat.html">Node.js Compatibility</a></li>
<li><a href="/reference/recommended-practices.html">Recommended Practices</a></li>
<li><a href="/reference/troubleshooting.html">Troubleshooting</a></li>
<li><a href="/reference/faq.html">Frequently Asked Questions</a></li>
<li><a href="/reference/migration.html">Migration</a></li>
</ul>
<h3>Guides</h3>
<ul>
<li><a href="/guide/getting-started.html">Getting Started</a></li>
<li><a href="/guide/starting-a-pear-desktop-project.html">Starting a Pear Desktop Project</a></li>
<li><a href="/guide/making-a-pear-desktop-app.html">Making a Pear Desktop Application</a></li>
<li><a href="/guide/starting-a-pear-terminal-project.html">Starting a Pear Terminal Project</a></li>
<li><a href="/guide/making-a-pear-terminal-app.html">Making a Pear Terminal Application</a></li>
<li><a href="/guide/sharing-a-pear-app.html">Sharing a Pear Application</a></li>
<li><a href="/guide/releasing-a-pear-app.html">Releasing a Pear Application</a></li>
<li><a href="/guide/making-a-bare-mobile-app.html">Making a Bare Mobile Application</a></li>
<li><a href="/guide/debugging-a-pear-terminal-app.html">Debugging a Pear Terminal Application</a></li>
<li><a href="/guide/creating-a-pear-init-template.html">Creating a <code>pear init</code> Template</a></li>
</ul>
<h3>How-tos</h3>
<ul>
<li><a href="/howto/connect-two-peers-by-key-with-hyperdht.html">Connect two peers</a></li>
<li><a href="/howto/connect-to-many-peers-by-topic-with-hyperswarm.html">Connect many peers</a></li>
<li><a href="/howto/replicate-and-persist-with-hypercore.html">Replicate &#x26; persist</a></li>
<li><a href="/howto/work-with-many-hypercores-using-corestore.html">Manage multiple Hypercores</a></li>
<li><a href="/howto/share-append-only-databases-with-hyperbee.html">Share append-only databases</a></li>
<li><a href="/howto/create-a-full-peer-to-peer-filesystem-with-hyperdrive.html">Create a p2p filesystem</a></li>
</ul>
<h3>Pear Modules</h3>
<ul>
<li><a href="/index.html#application-libraries">Application Libraries</a></li>
<li><a href="/index.html#user-interface-libraries">User Interface Libraries</a></li>
<li><a href="/index.html#common-libraries">Common Libraries</a></li>
<li><a href="/index.html#developer-libraries">Developer Libraries</a></li>
<li><a href="/index.html#integration-libraries">Integration Libraries</a></li>
</ul>
<h3>P2P Modules</h3>
<ul>
<li><a href="/index.html#building-blocks">Building-Block Libraries</a></li>
<li><a href="/index.html#helpers">Helper Libraries</a></li>
</ul>
<h3>Building blocks</h3>
<ul>
<li><a href="/building-blocks/hypercore.html">Hypercore</a></li>
<li><a href="/building-blocks/hyperbee.html">Hyperbee</a></li>
<li><a href="/building-blocks/hyperdrive.html">Hyperdrive</a></li>
<li><a href="/building-blocks/autobase.html">Autobase</a></li>
<li><a href="/building-blocks/hyperdht.html">HyperDHT</a></li>
<li><a href="/building-blocks/hyperswarm.html">Hyperswarm</a></li>
</ul>
<h3>Helpers</h3>
<ul>
<li><a href="/helpers/corestore.html">Corestore</a></li>
<li><a href="/helpers/localdrive.html">Localdrive</a></li>
<li><a href="/helpers/mirrordrive.html">Mirrordrive</a></li>
<li><a href="/helpers/secretstream.html">Secretstream</a></li>
<li><a href="/helpers/compact-encoding.html">Compact encoding</a></li>
<li><a href="/helpers/protomux.html">Protomux</a></li>
</ul>
<h3>Bare Modules</h3>
<ul>
<li><a href="/index.html#bare-modules">Standard Libraries</a></li>
</ul>
<h3>Tools</h3>
<ul>
<li><a href="/index.html#tools">Tool List</a></li>
<li><a href="/tools/hypershell.html">Hypershell</a></li>
<li><a href="/tools/hypertele.html">Hypertele</a></li>
<li><a href="/tools/hyperbeam.html">Hyperbeam</a></li>
<li><a href="/tools/hyperssh.html">Hyperssh</a></li>
<li><a href="/tools/drives.html">Drives</a></li>
</ul>
<h3>Examples</h3>
<ul>
<li><a href="https://github.com/holepunchto/pear/tree/main/examples/terminal">Pear Terminal</a></li>
<li><a href="https://github.com/holepunchto/pear/tree/main/examples/desktop">Pear Desktop (Electron)</a></li>
<li><a href="https://github.com/holepunchto/bare-android">Bare Android</a></li>
<li><a href="https://github.com/holepunchto/bare-ios">Bare iOS</a></li>
</ul></aside><main class="site-content"><div class="heading-link"><a href="#sharing-a-pear-application"><h1>#</h1></a><h1 id="sharing-a-pear-application">Sharing a Pear Application</h1></div>
<p>Applications can be shared with peers by seeding them to the network from an efficient local data structure (a <a href="https://github.com/holepunchto/hypercore">hypercore</a>). We call the mirroring of a local file system into the Pear platform Application Storage "staging". Seeding is sharing an app from a machine over the Distributed Hash Table (DHT) (via <a href="https://github.com/holepunchto/hyperswarm">hyperswarm</a>) so that other peers can replicate, consume and reseed the application.</p>
<p></p><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;">
      <iframe style="top: 0; left: 0; width: 100%; height: 100%; position: absolute; border: 0;" title="Youtube video player" src="https://www.youtube-nocookie.com/embed/BEadqmp7lA0?rel=0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share;" referrerpolicy="strict-origin-when-cross-origin"></iframe>
    </div>
        <p></p>
<p>This guide can either follow on from, <a href="/guide/making-a-pear-desktop-app.html">Making a Pear Desktop Application</a>, <a href="/guide/making-a-pear-terminal-app.html">Making a Pear Terminal Application</a>, or get setup quickly with the following:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="bash" data-theme="github-dark github-light"><code data-language="bash" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">mkdir</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> staging-example</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">cd</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> staging-example</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> init</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> -y</span></span></code></pre></figure>
<p>If starting from <a href="/guide/making-a-pear-desktop-app.html">Making a Pear Desktop Application</a> or <a href="/guide/making-a-pear-terminal-app.html">Making a Pear Terminal Application</a> ensure that the command-line current working directory is set to the project folder of the application.</p>
<div class="heading-link"><a href="#step-1.-stage-the-app"><h2>#</h2></a><h2 id="step-1.-stage-the-app">Step 1. Stage the app</h2></div>
<p>To view the help for the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear stage</span></span></code></span> command run <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear help stage</span></span></code></span>.</p>
<p>The command signature for <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear stage</span></span></code></span> is <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear stage &#x3C;channel|link> [dir]</span></span></code></span>.</p>
<p>Before a project is staged for the first time there is no key. The application name and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>channel</span></span></code></span> name are involved in generating the application key, which is later used to run the application from the DHT.</p>
<p>By convention, for internal use we use the channel name <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>dev</span></span></code></span>:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>pear stage dev</span></span></code></pre></figure>
<p>No need to specify <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>dir</span></span></code></span>, the command-line current working directory is already set to the project folder.</p>
<p>The channel name can be any valid name. Using <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>dev</span></span></code></span> for local development checks and internal collaboration, using <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear stage production</span></span></code></span> for production and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear stage &#x3C;custom-channel-name></span></span></code></span> for any customizations/specializations of the application is a reasonable convention.</p>
<p>Stage will output a diff of changes - the first time will all be additions of course - and then it will output the application link.</p>
<p>There will be a warmup step where the application is analyzed for initialization-to-loaded critical-path. This metadata is stored along with the application into an application-dedicated hypercore inside Pear. This helps the application load faster. All state is local and by default only the original machine that stages an application can write to this application-dedicated hypercore.</p>
<blockquote>
<p>Some frontend frameworks will load different assets based on whether the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>NODE_ENV</span></span></code></span> environment variable is set to <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>production</span></span></code></span>. If the application has this need, use <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>NODE_ENV=production pear stage dev</span></span></code></span> in order to stage the production library code so that when Stage Warmup occurs the captured critical-path consists of production assets.</p>
</blockquote>
<div class="heading-link"><a href="#step-2.-run-the-app-on-the-same-machine"><h2>#</h2></a><h2 id="step-2.-run-the-app-on-the-same-machine">Step 2. Run the app on the same machine</h2></div>
<p>To view the help for the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span> command run <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear help run</span></span></code></span>.</p>
<p>The command signature for <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span> is <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run &#x3C;link></span></span></code></span>.</p>
<p>Copy the application link that was output when the application was staged in the prior step and pass it to <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span>. For example, if the application link was <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span></code></span> the command to run would be:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>pear run pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span></code></pre></figure>
<p><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span>  opens the application from Pear's application storage. So far the application has remained local, in order to share it with other peers it must be seeded.</p>
<div class="heading-link"><a href="#step-3.-seed-the-app"><h2>#</h2></a><h2 id="step-3.-seed-the-app">Step 3. Seed the app</h2></div>
<p>The application can be shared with other peers by announcing the application to the DHT and then supplying the application link to other peers.</p>
<p>To view the help for the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed</span></span></code></span> command run <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear help seed</span></span></code></span>.</p>
<p>The command signature for <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed</span></span></code></span> is <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed &#x3C;channel|link> [dir]</span></span></code></span>.</p>
<p>The staged application can be seeded with:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>pear seed dev</span></span></code></pre></figure>
<p>The application name and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>channel</span></span></code></span> name are involved in generating the application key so <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed</span></span></code></span> uses the project folder to determine the application name from the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>package.json</span></span></code></span> (<span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.name</span></span></code></span> or else <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>name</span></span></code></span> field). There is no need to specify <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>dir</span></span></code></span> here as the command-line current working directory is already set to the project folder.</p>
<p>This will output something similar to the following</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>üçê Seeding: chat [ dev ]</span></span>
<span data-line=""><span>   ctrl^c to stop &#x26; exit</span></span>
<span data-line=""> </span>
<span data-line=""><span>-o-:-</span></span>
<span data-line=""><span>    pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span>
<span data-line=""><span>...</span></span>
<span data-line=""><span>^_^ announced</span></span></code></pre></figure>
<p>As long as the process is running the application is being seeded. If other peers reseed the application the original process could be closed. Be sure to keep the terminal open while this process is running.</p>
<div class="heading-link"><a href="#step-4.-run-the-app-on-another-machine"><h2>#</h2></a><h2 id="step-4.-run-the-app-on-another-machine">Step 4. Run the app on another machine</h2></div>
<p>It's important that the application seeding process from the former step is up and running otherwise peers will not be able to connect and replicate state.</p>
<p>With another machine or friend that has <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear</span></span></code></span> installed execute the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run &#x3C;link></span></span></code></span> command to load the application directly peer-to-peer. So with the same example application link it would be:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>pear run pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span></code></pre></figure>
<p>When <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span> is executed on the peer machine there will be a security prompt to add the key to a list of trusted applications by typing 'TRUST'.</p>
<p>When running a terminal application using an untrusted key for the first time the prompt would be:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>pear run pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span>
<span data-line=""><span>‚úñ Key pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o is not known</span></span>
<span data-line=""> </span>
<span data-line=""><span>Be sure that software is trusted before running it</span></span>
<span data-line=""> </span>
<span data-line=""><span>Type "TRUST" to allow execution or anything else to exit</span></span>
<span data-line=""> </span>
<span data-line=""><span>Trust application?</span></span></code></pre></figure>
<p>The trust dialog is a security mechanism in Pear that appears when the user tries to run an application from an unknown or untrusted key for the first time. In case that the app is run in detached mode, for example, when clicking on a pear link in the browser, the trust dialog is a GUI (Graphical User Interface).</p>
<p><img src="/assets/trust-dialog.png" alt="Trust dialog"></p>
<blockquote>
<p>During development with <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run --dev</span></span></code></span>, applications are automatically trusted, as they are assumed to be safe for testing purposes. Trust dialog can be suppressed using the  <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>--no-ask</span></span></code></span> flag with <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span> in which case the application will automatically decline unknown keys.</p>
</blockquote>
<p>The application has no state when it's opened for the first time, so the application may show a loader until it's ready to reveal.</p>
<p>The application staging machine that is running the seeding process should show output similar to:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>üçê Seeding: chat [ dev ]</span></span>
<span data-line=""><span>   ctrl^c to stop &#x26; exit</span></span>
<span data-line=""> </span>
<span data-line=""><span>-o-:-</span></span>
<span data-line=""><span>    pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span>
<span data-line=""><span>...</span></span>
<span data-line=""><span>^_^ announced</span></span>
<span data-line=""><span>‚Ä¢-‚Ä¢ peer join 8054f613d911b990834a0234507447c8ca88f4e778594c0e4fc480a314dc6d62</span></span></code></pre></figure>
<p>The <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>peer join</span></span></code></span> line displays the remote public key, in hex, of the peer that executed <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span> with the application link.</p>
<p>Once the application is closed on the peer machine the seeding output on the original machine will be similar to:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="plaintext" data-theme="github-dark github-light"><code data-language="plaintext" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span>üçê Seeding: staging-example [ dev ]</span></span>
<span data-line=""><span>   ctrl^c to stop &#x26; exit</span></span>
<span data-line=""> </span>
<span data-line=""><span>-o-:-</span></span>
<span data-line=""><span>    pear//:nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span>
<span data-line=""><span>...</span></span>
<span data-line=""><span>^_^ announced</span></span>
<span data-line=""><span>‚Ä¢-‚Ä¢ peer join 8054f613d911b990834a0234507447c8ca88f4e778594c0e4fc480a314dc6d62</span></span>
<span data-line=""><span>-_- peer drop 8054f613d911b990834a0234507447c8ca88f4e778594c0e4fc480a314dc6d62</span></span></code></pre></figure>
<div class="heading-link"><a href="#discussion"><h3>#</h3></a><h3 id="discussion">Discussion</h3></div>
<div class="heading-link"><a href="#lazy-loading-large-files--sparse-replication"><h4>#</h4></a><h4 id="lazy-loading-large-files--sparse-replication">Lazy loading large files &#x26; sparse replication</h4></div>
<p>When Pear loads an application from a peer the staged files are sparsely replicated. Assets not in the critical loading path are only downloaded from peers on-demand. If the application doesn't request an asset or module during a user-session on a given machine it does not get replicated to that machine. Pear's Application Storage can contain very large files (terabytes) that can be accessed by peers on demand. It also makes sense to structure applications so that very large files are not in the critical loading path. So that means strategies such as lazy loading large payloads, avoiding autoplaying large media files and deferring non-essential scripts and styles is as effective with Pear (if not moreso) than with Internet Browsers.</p>
<div class="heading-link"><a href="#reseeding"><h4>#</h4></a><h4 id="reseeding">Reseeding</h4></div>
<p>The command signature for <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed</span></span></code></span> is <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed &#x3C;channel|link> [dir]</span></span></code></span>.</p>
<p>If the application was staged on the machine, it will seed the application from the machine.</p>
<p>Otherwise, passing an application link to <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed</span></span></code></span>  will reseed the application from that link.</p>
<p>For example, given the link <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span></code></span>, executing <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed pear://nykmkrpwgadcd8m9x5khhh43j9izj123eguzqg3ygta7yn1s379o</span></span></code></span> on a peer that didn't originally stage that particular application will result in that process syncing up-to-date data from peers and providing it to peers who need it.</p>
<p>Once an application is being reseeded, the original seeding process can be closed on the staging machine. However any newly staged changes have to be seeded from that machine for reseeders to pick them up. Which means <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear seed</span></span></code></span> can be used "deploy" to reseeders by starting after staging, leaving it running until reseeders have synced and then stopping the process again.</p>
<div class="heading-link"><a href="#next"><h2>#</h2></a><h2 id="next">Next</h2></div>
<ul>
<li><a href="/guide/releasing-a-pear-app.html">Releasing a Pear Application</a></li>
</ul></main></div><script type="module" src="/assets/index.js"></script>
</body>
</html>
