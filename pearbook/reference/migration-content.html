<h1>Migration</h1>
<p>Pear v2 introduces a breaking change to the application entrypoint and includes several API deprecations.</p>
<p>Pear v1 supports HTML entrypoints, while Pear v2 supports only JavaScript entrypoints.</p>
<h2>Migration Scenarios</h2>
<p>There are two migratory scenarios:</p>
<ul>
<li>Pre-transitional Migration: a Pear v1 application, preparing to migrate to Pear v2 prior to Pear v2 release</li>
<li>Post-transitional Migration: a Pear v1 application updating to Pear v2 after Pear v2 release has occurred</li>
</ul>
<p>In both cases the Migration Strategy will work.</p>
<h2>Migration Strategy</h2>
<p>To prepare a Pear Desktop Application written for Pear v1 to seamlessly migrate to v2 prior to v2 release use the following strategy:</p>
<ol>
<li>Ensure the project <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>package.json</span></span></code></span> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>main</span></span></code></span> field is <strong>unset</strong> and ensure that the HTML entry file is named <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>index.html</span></span></code></span>.</li>
<li>Install dependencies: <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>npm install pear-electron pear-bridge</span></span></code></span></li>
<li>Set <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>package.json</span></span></code></span> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.pre</span></span></code></span> field to <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-electron/pre</span></span></code></span></li>
<li>Add an <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>index.js</span></span></code></span> file that uses <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-electron</span></span></code></span> and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-bridge</span></span></code></span>:</li>
</ol>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Runtime </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> 'pear-electron'</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Bridge </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> 'pear-bridge'</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> bridge</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> Bridge</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">()</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> bridge.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">ready</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">()</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> runtime</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> Runtime</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">()</span></span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> pipe</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> runtime.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">start</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">({ bridge })</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">pipe.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">on</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">'close'</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">, () </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">=></span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> Pear.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">exit</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">())</span></span></code></pre></figure>
<p>Install the dependencies:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">npm</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> install</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pear-electron</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pear-bridge</span></span></code></pre></figure>
<h3>Explanation</h3>
<p>List numbers correspond as explanations for items in Pear v1 to Pear v2 Pre-transitional Migration Strategy.</p>
<ol>
<li>v1 supports <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>.html</span></span></code></span> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>main</span></span></code></span> fields, v2 only supports <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>.js</span></span></code></span> fields. This approach relies on <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>index.html</span></span></code></span> (v1) and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>index.js</span></span></code></span> (v2) <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>main</span></span></code></span> field defaults so that when the update occurs from v1 to v2 there's no validation issue on the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>main</span></span></code></span> field and the entrypoint exists whichever version of Pear the app is running on.</li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-electron</span></span></code></span> is the UI library for v2, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-bridge</span></span></code></span> provides http-p2p functionality for electron, installing them into a v1 application makes it v2 ready prior to v2 release.</li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.pre</span></span></code></span> is a v2 feature that runs pre-run (from disk) and pre-stage. <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-electron/pre</span></span></code></span> is a script that autosets <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.assets.ui</span></span></code></span> and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.stage.entrypoints</span></span></code></span> (for html script tag entrypoint warmups)</li>
<li>v2 applications only run <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>.js</span></span></code></span> files. The <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>index.js</span></span></code></span> file starts desktop application code in electron UI.</li>
</ol>
<h2>Config Migration</h2>
<p>The <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>package.json</span></span></code></span> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear</span></span></code></span> field supplies configuration information for Pear applications.</p>
<ul>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.userAgent</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.gui.userAgent</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.gui.hideable</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.gui.closeHides</span></span></code></span></li>
</ul>
<p>When preparing for v2 in advance, both fields must be present:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="json" data-theme="github-dark github-light"><code data-language="json" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">"pear"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">  "userAgent"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">"custom user agent"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">  "gui"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">    "userAgent"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">"custom user agent"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">    "hideable"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">true</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">,</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">    "closesHides"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">true</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">  }</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre></figure>
<h3>Route-Handling Migration</h3>
<p>If applications are performing route handling, in v2 it is necessary for an application to opt-in to routing.</p>
<p>In v1 when a <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear://</span></span></code></span> link is clicked outside of the application (e.g. in another app), or supplied to <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear run</span></span></code></span> the application is either opened, or sent a wakeup notification if already open.</p>
<p>When the application is opened, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.config.linkData</span></span></code></span> contains the pathname of the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear://</span></span></code></span> link, excluding the leading <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>/</span></span></code></span>. For example pear://runtime/pathname/to/some/where <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>linkData</span></span></code></span> would be <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pathname/to/some/where</span></span></code></span>.</p>
<p>When woken, <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.updates((wakeup) => {})</span></span></code></span> provides <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>wakeup.linkData</span></span></code></span>.</p>
<p>In v2 <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>linkData</span></span></code></span> is still available in both cases, but soft-deprecated in favor of v2 routing:</p>
<ul>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.app.entrypoint</span></span></code></span> &#x26; <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>wakeup.entrypoint</span></span></code></span> - full pathname: pear://runtime/pathname/to/some/where -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>/pathname/to/some/where</span></span></code></span>. The <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>entrypoint</span></span></code></span> is mapped per <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear.routes</span></span></code></span> configuration.</li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.app.fragment</span></span></code></span> &#x26; <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>wakeup.fragment</span></span></code></span> - location hash without <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>#</span></span></code></span>: pear://runtime/pathname#something -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>something</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.app.query</span></span></code></span> &#x26; <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>wakeup.query</span></span></code></span> - query string without <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>?</span></span></code></span>. pear://runtime/pathname?some-query -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>some-query</span></span></code></span></li>
</ul>
<p>To opt-in fully to v1 behavior the catch-all <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>routes</span></span></code></span> config can be used:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="json" data-theme="github-dark github-light"><code data-language="json" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">{</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">  "pear"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: {</span></span>
<span data-line=""><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">    "routes"</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">: </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">"."</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">  }</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">}</span></span></code></pre></figure>
<h2>API Migration</h2>
<p>The Pear v2 API deprecates all UI related methods now exported from <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-electron</span></span></code></span> and a few others that have been moved to modules or renamed.</p>
<h3><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui</span></span></code></span></h3>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="js" data-theme="github-dark github-light"><code data-language="js" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> ui </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">from</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> 'pear-electron'</span></span></code></pre></figure>
<ul>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.media</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui.media</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.tray</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui.app.tray</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.badge</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui.app.badge</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.Window</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui.Window</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.View</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui.View</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.Window.self</span></span></code></span> / <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.View.self</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>ui.app</span></span></code></span></li>
</ul>
<h3><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-*</span></span></code></span></h3>
<ul>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.worker.run</span></span></code></span> -> <a href="https://github.com/holepunchto/pear-run"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-run</span></span></code></span></a></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.worker.pipe</span></span></code></span> -> <a href="https://github.com/holepunchto/pear-pipe"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-pipe</span></span></code></span></a></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.message</span></span></code></span> -> <a href="https://github.com/holepunchto/pear-message"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-message</span></span></code></span></a></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.messages</span></span></code></span> -> <a href="https://github.com/holepunchto/pear-messages"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-messages</span></span></code></span></a></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.wakeups</span></span></code></span> -> <a href="https://github.com/holepunchto/pear-wakeups"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-wakeups</span></span></code></span></a></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.updates</span></span></code></span> -> <a href="https://github.com/holepunchto/pear-updates"><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-updates</span></span></code></span></a></li>
</ul>
<h3><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear</span></span></code></span></h3>
<ul>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.config</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.app</span></span></code></span></li>
<li><span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.reload</span></span></code></span> -> <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>location.reload</span></span></code></span></li>
</ul>
<h2>Verifying Migration</h2>
<p>Verify in development with</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> run</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> -d</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> .</span></span></code></pre></figure>
<p>Production equivalent verification:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> stage</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> check</span></span></code></pre></figure>
<p>Then per link output from stage command:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> run</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> &#x3C;</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">lin</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">k</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">></span></span></code></pre></figure>
<p>If the application starts and operates correctly in any related areas where changes have been made, then migration is verified.</p>
<p>If the SemVer printed by <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear -v</span></span></code></span> is 2.x.x then migration verification is complete.</p>
<p>If the SemVer printed by <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear -v</span></span></code></span> is 1.x.x then these steps need to performed on v2 also.</p>
<p>Switch to v2 with:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> sidecar</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> --key</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pzcjqmpoo6szkoc4bpkw65ib9ctnrq7b6mneeinbhbheihaq6p6o</span></span></code></pre></figure>
<p>This will run the current sidecar in the terminal and switch to the v2 release line per the supplied key.</p>
<p>The command should output something similar to:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Closing</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> any</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> current</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> clients...</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Shutting</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> down</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> current</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar...</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">✔</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> has</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> shutdown</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Rebooting</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> current</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> process</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> as</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">  -</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [ </span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">pqbzjhqyonxprx8hghxexnmctw75mr91ewqw5dxe1zmntfyaddqy</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> ]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Runtime:</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pear-runtime</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">=========================</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> INIT</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> ===================================</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Booting</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+0ms]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">~</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">✔</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Current</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> process</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> is</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> now</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Version:</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> {</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">    "key"</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">:</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> "pqbzjhqyonxprx8hghxexnmctw75mr91ewqw5dxe1zmntfyaddqy",</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">    "length"</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">:</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> 9195,</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">    "fork"</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5">:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 0</span></span>
<span data-line=""><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">  }</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">=========================</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> RUN</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> ====================================</span></span>
<span data-line=""> </span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Switching</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> to</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> key</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pzcjqmpoo6szkoc4bpkw65ib9ctnrq7b6mneeinbhbheihaq6p6o</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> with</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> length</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> 2371...</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+261.4711ms]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">Platform</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> update</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Available.</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Restart</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> to</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> update</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> to:</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+367.2348ms]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1"> v0.2371.pzcjqmpoo6szkoc4bpkw65ib9ctnrq7b6mneeinbhbheihaq6p6o</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+0.0349ms]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> DHT</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> known-nodes</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> read</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> from</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> database</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 100</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> nodes</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+4631.6207ms]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Drive</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> bundle</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pzcjqmpoo6szkoc4bpkw65ib9ctnrq7b6mneeinbhbheihaq6p6o</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> core</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> length:</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> 2371</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+5.1877ms]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> swarm</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> joining</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> discovery</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> key</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> of</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pzcjqmpoo6szkoc4bpkw65ib9ctnrq7b6mneeinbhbheihaq6p6o</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+0.0797ms]</span></span>
<span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">-</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Sidecar</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> Booted</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E"> [+1.1023ms]</span></span></code></pre></figure>
<p>Once the "Restart to update" message is observed, use ctrl+c to close the sidecar and then run <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear -v</span></span></code></span> to verify that the key is correct. If it isn't, try again. If it is, verify the application on v2.</p>
<p>Verify in development with</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> run</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> -d</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> .</span></span></code></pre></figure>
<p>Production equivalent verification:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> stage</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> check</span></span></code></pre></figure>
<p>Then per link output from stage command:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> run</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> -d</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49"> &#x3C;</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62">lin</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E">k</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49">></span></span></code></pre></figure>
<p>If the application starts and operates correctly, then migration is verified.</p>
<p>Once verified, switch back to production:</p>
<figure data-rehype-pretty-code-figure=""><pre style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff" tabindex="0" data-language="sh" data-theme="github-dark github-light"><code data-language="sh" data-theme="github-dark github-light" style="display: grid;"><span data-line=""><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1">pear</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> sidecar</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5"> --key</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62"> pqbzjhqyonxprx8hghxexnmctw75mr91ewqw5dxe1zmntfyaddqy</span></span></code></pre></figure>
<p>If there's any problems switching back, make sure there are no <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>pear-runtime</span></span></code></span> processes running and run <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>npx pear</span></span></code></span>.</p>
<blockquote>
<p>⚠️ <strong>WARNING:</strong> Omitting to switch back to production Pear leaves the system on a release-line that will be ended.</p>
<p><strong>In order to avoid any issues, be sure to switch back to production [ pqbzjhqyonx... ]</strong></p>
</blockquote>
<h2 id="compat-mode">Compat Mode</a></h2>
<p>While v1 Pear APIs will continue to function with deprecation messages, for projects that need a legacy-bridge during overlapping transitional periods, compat-mode can be used to:</p>
<ul>
<li>Silence deprecation warnings</li>
<li>Ensure legacy methods to continue to function after their removal for a longer time period</li>
<li>Limit ability to use new APIs in future</li>
<li>Eventually itself be deprecated &#x26; removed</li>
</ul>
<p>Compat mode is a temporary transitioning utility, if usage can be avoided in favour of moving to the equivalent methods this avoids potential for legacy lock-in.</p>
<p>Enable with <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>&#x3C;script>Pear.constructor.COMPAT = true&#x3C;/script></span></span></code></span> at the top of the <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>&#x3C;head></span></span></code></span> element in the HTML entrypoint and <span data-rehype-pretty-code-figure=""><code data-language="plaintext" data-theme="github-dark github-light" style="--shiki-dark:#e1e4e8;--shiki-light:#24292e;--shiki-dark-bg:#24292e;--shiki-light-bg:#fff"><span data-line=""><span>Pear.constructor.COMPAT = true</span></span></code></span> at the top of worker or terminal app entrypoints.</p>
<p>Compat mode isn't needed for premigration, only if time is needed for the application to transition to equivalent v2 APIs.</p>